# Example Lovelace Dashboard for Routinely
# Add this to your dashboard or use as a starting point

title: Routinely
views:
  - title: Routines
    path: routines
    cards:
      # Active Routine Card
      - type: conditional
        conditions:
          - entity: binary_sensor.routinely_active
            state: "on"
        card:
          type: vertical-stack
          cards:
            - type: custom:mushroom-template-card
              primary: "{{ state_attr('sensor.routinely_status', 'routine_name') }}"
              secondary: "{{ states('sensor.routinely_current_task') }}"
              icon: "{{ state_attr('sensor.routinely_status', 'routine_icon') }}"
              icon_color: blue
              badge_icon: >-
                {% if is_state('binary_sensor.routinely_paused', 'on') %}
                mdi:pause
                {% else %}
                mdi:play
                {% endif %}

            # Timer Display
            - type: markdown
              content: |
                # {{ states('sensor.routinely_time_remaining') }}
                Task {{ state_attr('sensor.routinely_status', 'current_task_index') | int + 1 }} of {{ state_attr('sensor.routinely_status', 'total_tasks') }}

            # Progress Bar
            - type: gauge
              entity: sensor.routinely_progress
              min: 0
              max: 100
              severity:
                green: 66
                yellow: 33
                red: 0

            # Control Buttons
            - type: horizontal-stack
              cards:
                - type: button
                  name: Pause
                  icon: mdi:pause
                  show_state: false
                  tap_action:
                    action: call-service
                    service: routinely.pause

                - type: button
                  name: Resume
                  icon: mdi:play
                  show_state: false
                  tap_action:
                    action: call-service
                    service: routinely.resume

                - type: button
                  name: Skip
                  icon: mdi:skip-next
                  show_state: false
                  tap_action:
                    action: call-service
                    service: routinely.skip

                - type: button
                  name: Done
                  icon: mdi:check
                  show_state: false
                  tap_action:
                    action: call-service
                    service: routinely.complete_task

                - type: button
                  name: Cancel
                  icon: mdi:stop
                  show_state: false
                  tap_action:
                    action: call-service
                    service: routinely.cancel

      # No Active Routine - Show Start Buttons
      - type: conditional
        conditions:
          - entity: binary_sensor.routinely_active
            state: "off"
        card:
          type: vertical-stack
          cards:
            - type: markdown
              content: "## Start a Routine"

            # Add buttons for each routine (customize with your routine IDs)
            - type: horizontal-stack
              cards:
                - type: button
                  name: Morning
                  icon: mdi:weather-sunny
                  tap_action:
                    action: call-service
                    service: routinely.start
                    service_data:
                      routine_id: YOUR_MORNING_ROUTINE_ID

                - type: button
                  name: Evening
                  icon: mdi:weather-night
                  tap_action:
                    action: call-service
                    service: routinely.start
                    service_data:
                      routine_id: YOUR_EVENING_ROUTINE_ID

      # Status Entities
      - type: entities
        title: Status
        entities:
          - entity: sensor.routinely_status
          - entity: sensor.routinely_current_task
          - entity: sensor.routinely_time_remaining
          - entity: sensor.routinely_progress
          - entity: binary_sensor.routinely_active
          - entity: binary_sensor.routinely_paused
          - entity: binary_sensor.routinely_awaiting_input
